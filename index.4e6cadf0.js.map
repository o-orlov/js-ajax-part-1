{"mappings":"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","sources":["index.js"],"sourcesContent":["const MOUSE_PRIMARY_BUTTON = 1;\nconst DRAGGABLE_ITEM_COORDS_OFFSET = 50;\nconst BORDER_WIDTH = 1;\n\nconst dragAreaEl = document.getElementById('drag-area');\nconst dropAreaGridEl = document.getElementById('drop-area_grid');\nconst dropAreaCanvasEl = document.getElementById('drop-area_canvas');\nconst draggableItemEl = document.getElementById('draggable-item');\n\nlet pointerId = null;\n\nfunction onDocumentPointerUp(event) {\n    if (event.pointerId !== pointerId) {\n        return;\n    }\n\n    pointerId = null;\n    document.removeEventListener('pointerup', onDocumentPointerUp);\n    document.removeEventListener('pointermove', onDocumentPointerMove);\n\n    if (doesDraggableItemCollideWithDropArea(dropAreaGridEl, false)) {\n        dropDraggableItem(dropAreaGridEl);\n    } else if (doesDraggableItemCollideWithDropArea(dropAreaCanvasEl, true)) {\n        dropDraggableItem(dropAreaCanvasEl);\n    }\n\n    setDraggableItemVisible(false);\n    setDropAreaHighlighted(dropAreaGridEl, false);\n    setDropAreaHighlighted(dropAreaCanvasEl, false);\n}\n\nfunction dropDraggableItem(dropAreaEl) {\n    const droppedItemEl = document.createElement('div');\n    droppedItemEl.className = 'dropped-item';\n    droppedItemEl.style.backgroundColor = draggableItemEl.style.backgroundColor;\n\n    if (dropAreaEl === dropAreaGridEl) {\n        droppedItemEl.classList.add('dropped-item_grid');\n    } else {\n        droppedItemEl.classList.add('dropped-item_canvas');\n        setDroppedItemCoordsMappedToDropAreaCanvas(droppedItemEl, dropAreaEl);\n    }\n\n    dropAreaEl.appendChild(droppedItemEl);\n}\n\nfunction setDroppedItemCoordsMappedToDropAreaCanvas(droppedItemEl, dropAreaEl) {\n    if (dropAreaEl !== dropAreaCanvasEl) {\n        return;\n    }\n\n    const dropAreaRect = dropAreaEl.getBoundingClientRect();\n    const top = parseInt(draggableItemEl.style.top, 10) - dropAreaRect.top - BORDER_WIDTH + dropAreaEl.scrollTop;\n    const left = parseInt(draggableItemEl.style.left, 10) - dropAreaRect.left - BORDER_WIDTH + dropAreaEl.scrollLeft;\n    droppedItemEl.style.top = `${top}px`;\n    droppedItemEl.style.left = `${left}px`;\n}\n\nfunction onDocumentPointerMove(event) {\n    if (event.pointerId !== pointerId) {\n        return;\n    }\n\n    setDraggableItemCoords(event.pageX, event.pageY);\n    updateDropAreasHighlighting();\n}\n\nfunction updateDropAreasHighlighting() {\n    if (doesDraggableItemCollideWithDropArea(dropAreaGridEl, false)) {\n        setDropAreaHighlighted(dropAreaGridEl, true);\n        setDropAreaHighlighted(dropAreaCanvasEl, false);\n    } else if (doesDraggableItemCollideWithDropArea(dropAreaCanvasEl, true)) {\n        setDropAreaHighlighted(dropAreaGridEl, false);\n        setDropAreaHighlighted(dropAreaCanvasEl, true);\n    } else {\n        setDropAreaHighlighted(dropAreaGridEl, false);\n        setDropAreaHighlighted(dropAreaCanvasEl, false);\n    }\n}\n\nfunction doesDraggableItemCollideWithDropArea(dropAreaEl, fully) {\n    const draggableItemRect = draggableItemEl.getBoundingClientRect();\n    const dropAreaRect = dropAreaEl.getBoundingClientRect();\n\n    if (fully) {\n        return (\n            draggableItemRect.top > dropAreaRect.top &&\n            draggableItemRect.right < dropAreaRect.right &&\n            draggableItemRect.bottom < dropAreaRect.bottom &&\n            draggableItemRect.left > dropAreaRect.left\n        );\n    }\n\n    return !(\n        draggableItemRect.top > dropAreaRect.bottom ||\n        draggableItemRect.right < dropAreaRect.left ||\n        draggableItemRect.bottom < dropAreaRect.top ||\n        draggableItemRect.left > dropAreaRect.right\n    );\n}\n\nfunction setDropAreaHighlighted(dropAreaEl, highlighted) {\n    if (highlighted) {\n        dropAreaEl.classList.add('drop-area_highlighted');\n    } else {\n        dropAreaEl.classList.remove('drop-area_highlighted');\n    }\n}\n\nfunction getRandomColor() {\n    const color = ['#'];\n    for (let i = 0; i < 6; i++) {\n        color.push(Math.floor(Math.random() * 16).toString(16));\n    }\n    return color.join('');\n}\n\nfunction setDraggableItemVisible(visible) {\n    if (visible) {\n        draggableItemEl.classList.remove('draggable-item_hidden');\n    } else {\n        draggableItemEl.classList.add('draggable-item_hidden');\n    }\n}\n\nfunction setDraggableItemCoords(x, y) {\n    draggableItemEl.style.top = `${y - DRAGGABLE_ITEM_COORDS_OFFSET}px`;\n    draggableItemEl.style.left = `${x - DRAGGABLE_ITEM_COORDS_OFFSET}px`;\n}\n\nfunction onDocumentPointerCancel(event) {\n    if (event.pointerId !== pointerId) {\n        return;\n    }\n\n    pointerId = null;\n    document.removeEventListener('pointerup', onDocumentPointerUp);\n    document.removeEventListener('pointermove', onDocumentPointerMove);\n    document.removeEventListener('pointercancel', onDocumentPointerCancel);\n\n    setDraggableItemVisible(false);\n    setDropAreaHighlighted(dropAreaGridEl, false);\n    setDropAreaHighlighted(dropAreaCanvasEl, false);\n}\n\nfunction onDragAreaPointerDown(event) {\n    if (pointerId !== null) {\n        return;\n    }\n    // eslint-disable-next-line no-bitwise\n    if (event.pointerType === 'mouse' && !(event.buttons & MOUSE_PRIMARY_BUTTON)) {\n        return;\n    }\n\n    pointerId = event.pointerId;\n    document.addEventListener('pointerup', onDocumentPointerUp);\n    document.addEventListener('pointermove', onDocumentPointerMove);\n    document.addEventListener('pointercancel', onDocumentPointerCancel);\n\n    draggableItemEl.style.backgroundColor = getRandomColor();\n    setDraggableItemCoords(event.pageX, event.pageY);\n    setDraggableItemVisible(true);\n}\n\ndragAreaEl.addEventListener('pointerdown', onDragAreaPointerDown);\n"],"names":["MOUSE_PRIMARY_BUTTON","DRAGGABLE_ITEM_COORDS_OFFSET","BORDER_WIDTH","dragAreaEl","document","getElementById","dropAreaGridEl","dropAreaCanvasEl","draggableItemEl","pointerId","onDocumentPointerUp","event","removeEventListener","onDocumentPointerMove","doesDraggableItemCollideWithDropArea","dropDraggableItem","setDraggableItemVisible","setDropAreaHighlighted","dropAreaEl","droppedItemEl","createElement","className","style","backgroundColor","classList","add","setDroppedItemCoordsMappedToDropAreaCanvas","appendChild","dropAreaRect","getBoundingClientRect","top","parseInt","scrollTop","left","scrollLeft","setDraggableItemCoords","pageX","pageY","updateDropAreasHighlighting","fully","draggableItemRect","right","bottom","highlighted","remove","getRandomColor","color","i","push","Math","floor","random","toString","join","visible","x","y","onDocumentPointerCancel","onDragAreaPointerDown","pointerType","buttons","addEventListener"],"version":3,"file":"index.4e6cadf0.js.map"}