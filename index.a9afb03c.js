const MOUSE_PRIMARY_BUTTON=1,DRAGGABLE_ITEM_HALF_SIZE=50,DROP_AREA_BORDER_WIDTH=1,dragAreaEl=document.getElementById("drag-area"),dropAreaGridEl=document.getElementById("drop-area_grid"),dropAreaCanvasEl=document.getElementById("drop-area_canvas"),draggableItemEl=document.getElementById("draggable-item");let pointerId=null;function onDocumentPointerUp(e){e.pointerId===pointerId&&(pointerId=null,document.removeEventListener("pointerup",onDocumentPointerUp),document.removeEventListener("pointermove",onDocumentPointerMove),document.removeEventListener("pointercancel",onDocumentPointerCancel),document.removeEventListener("scroll",onDocumentScroll),doesDraggableItemCollideWithDropArea(dropAreaGridEl,!1)?dropDraggableItem(dropAreaGridEl):doesDraggableItemCollideWithDropArea(dropAreaCanvasEl,!0)&&dropDraggableItem(dropAreaCanvasEl),setDraggableItemVisible(!1),setDropAreaHighlighted(dropAreaGridEl,!1),setDropAreaHighlighted(dropAreaCanvasEl,!1))}function dropDraggableItem(e){const t=document.createElement("div");t.className="dropped-item",t.style.backgroundColor=draggableItemEl.style.backgroundColor,e===dropAreaGridEl?t.classList.add("dropped-item_grid"):(t.classList.add("dropped-item_canvas"),setDroppedItemCoordsMappedToDropAreaCanvas(t,e)),e.appendChild(t)}function setDroppedItemCoordsMappedToDropAreaCanvas(e){const t=dropAreaCanvasEl.getBoundingClientRect();let o=parseInt(draggableItemEl.style.top,10)-t.top-1;o+=dropAreaCanvasEl.scrollTop-(window.pageYOffset||document.documentElement.scrollTop);let r=parseInt(draggableItemEl.style.left,10)-t.left-1;r+=dropAreaCanvasEl.scrollLeft-(document.pageXOffset||document.documentElement.scrollLeft),e.style.top=`${o}px`,e.style.left=`${r}px`}function onDocumentPointerMove(e){e.pointerId===pointerId&&(setDraggableItemCoords(e.pageX,e.pageY),updateDropAreasHighlighting())}function updateDropAreasHighlighting(){doesDraggableItemCollideWithDropArea(dropAreaGridEl,!1)?(setDropAreaHighlighted(dropAreaGridEl,!0),setDropAreaHighlighted(dropAreaCanvasEl,!1)):doesDraggableItemCollideWithDropArea(dropAreaCanvasEl,!0)?(setDropAreaHighlighted(dropAreaGridEl,!1),setDropAreaHighlighted(dropAreaCanvasEl,!0)):(setDropAreaHighlighted(dropAreaGridEl,!1),setDropAreaHighlighted(dropAreaCanvasEl,!1))}function doesDraggableItemCollideWithDropArea(e,t){const o=draggableItemEl.getBoundingClientRect(),r=e.getBoundingClientRect();return t?o.top>r.top&&o.right<r.right&&o.bottom<r.bottom&&o.left>r.left:!(o.top>r.bottom||o.right<r.left||o.bottom<r.top||o.left>r.right)}function setDropAreaHighlighted(e,t){t?e.classList.add("drop-area_highlighted"):e.classList.remove("drop-area_highlighted")}function getRandomColor(){const e=["#"];for(let t=0;t<6;t++)e.push(Math.floor(16*Math.random()).toString(16));return e.join("")}function setDraggableItemVisible(e){e?draggableItemEl.classList.remove("draggable-item_hidden"):draggableItemEl.classList.add("draggable-item_hidden")}function setDraggableItemCoords(e,t){draggableItemEl.style.top=t-50+"px",draggableItemEl.style.left=e-50+"px"}function onDocumentPointerCancel(e){e.pointerId===pointerId&&e.preventDefault()}function onDocumentScroll(e){e.preventDefault()}function onDragAreaPointerDown(e){null===pointerId&&("mouse"!==e.pointerType||1&e.buttons)&&(pointerId=e.pointerId,document.addEventListener("pointerup",onDocumentPointerUp),document.addEventListener("pointermove",onDocumentPointerMove),document.addEventListener("pointercancel",onDocumentPointerCancel),document.addEventListener("scroll",onDocumentScroll),draggableItemEl.style.backgroundColor=getRandomColor(),setDraggableItemCoords(e.pageX,e.pageY),setDraggableItemVisible(!0))}dragAreaEl.addEventListener("pointerdown",onDragAreaPointerDown);
//# sourceMappingURL=index.a9afb03c.js.map
