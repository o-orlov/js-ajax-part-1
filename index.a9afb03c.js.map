{"mappings":"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","sources":["index.js"],"sourcesContent":["const MOUSE_PRIMARY_BUTTON = 1;\nconst DRAGGABLE_ITEM_HALF_SIZE = 50;\nconst DROP_AREA_BORDER_WIDTH = 1;\n\nconst dragAreaEl = document.getElementById('drag-area');\nconst dropAreaGridEl = document.getElementById('drop-area_grid');\nconst dropAreaCanvasEl = document.getElementById('drop-area_canvas');\nconst draggableItemEl = document.getElementById('draggable-item');\n\nlet pointerId = null;\n\nfunction onDocumentPointerUp(event) {\n    if (event.pointerId !== pointerId) {\n        return;\n    }\n\n    pointerId = null;\n    document.removeEventListener('pointerup', onDocumentPointerUp);\n    document.removeEventListener('pointermove', onDocumentPointerMove);\n    document.removeEventListener('pointercancel', onDocumentPointerCancel);\n    document.removeEventListener('scroll', onDocumentScroll);\n\n    if (doesDraggableItemCollideWithDropArea(dropAreaGridEl, false)) {\n        dropDraggableItem(dropAreaGridEl);\n    } else if (doesDraggableItemCollideWithDropArea(dropAreaCanvasEl, true)) {\n        dropDraggableItem(dropAreaCanvasEl);\n    }\n\n    setDraggableItemVisible(false);\n    setDropAreaHighlighted(dropAreaGridEl, false);\n    setDropAreaHighlighted(dropAreaCanvasEl, false);\n}\n\nfunction dropDraggableItem(dropAreaEl) {\n    const droppedItemEl = document.createElement('div');\n    droppedItemEl.className = 'dropped-item';\n    droppedItemEl.style.backgroundColor = draggableItemEl.style.backgroundColor;\n\n    if (dropAreaEl === dropAreaGridEl) {\n        droppedItemEl.classList.add('dropped-item_grid');\n    } else {\n        droppedItemEl.classList.add('dropped-item_canvas');\n        setDroppedItemCoordsMappedToDropAreaCanvas(droppedItemEl, dropAreaEl);\n    }\n\n    dropAreaEl.appendChild(droppedItemEl);\n}\n\nfunction setDroppedItemCoordsMappedToDropAreaCanvas(droppedItemEl) {\n    const dropAreaRect = dropAreaCanvasEl.getBoundingClientRect();\n\n    let top = parseInt(draggableItemEl.style.top, 10) - dropAreaRect.top - DROP_AREA_BORDER_WIDTH;\n    top += dropAreaCanvasEl.scrollTop - (window.pageYOffset || document.documentElement.scrollTop);\n\n    let left = parseInt(draggableItemEl.style.left, 10) - dropAreaRect.left - DROP_AREA_BORDER_WIDTH;\n    left += dropAreaCanvasEl.scrollLeft - (document.pageXOffset || document.documentElement.scrollLeft);\n\n    droppedItemEl.style.top = `${top}px`;\n    droppedItemEl.style.left = `${left}px`;\n}\n\nfunction onDocumentPointerMove(event) {\n    if (event.pointerId !== pointerId) {\n        return;\n    }\n\n    setDraggableItemCoords(event.pageX, event.pageY);\n    updateDropAreasHighlighting();\n}\n\nfunction updateDropAreasHighlighting() {\n    if (doesDraggableItemCollideWithDropArea(dropAreaGridEl, false)) {\n        setDropAreaHighlighted(dropAreaGridEl, true);\n        setDropAreaHighlighted(dropAreaCanvasEl, false);\n    } else if (doesDraggableItemCollideWithDropArea(dropAreaCanvasEl, true)) {\n        setDropAreaHighlighted(dropAreaGridEl, false);\n        setDropAreaHighlighted(dropAreaCanvasEl, true);\n    } else {\n        setDropAreaHighlighted(dropAreaGridEl, false);\n        setDropAreaHighlighted(dropAreaCanvasEl, false);\n    }\n}\n\nfunction doesDraggableItemCollideWithDropArea(dropAreaEl, fully) {\n    const draggableItemRect = draggableItemEl.getBoundingClientRect();\n    const dropAreaRect = dropAreaEl.getBoundingClientRect();\n\n    if (fully) {\n        return (\n            draggableItemRect.top > dropAreaRect.top &&\n            draggableItemRect.right < dropAreaRect.right &&\n            draggableItemRect.bottom < dropAreaRect.bottom &&\n            draggableItemRect.left > dropAreaRect.left\n        );\n    }\n\n    return !(\n        draggableItemRect.top > dropAreaRect.bottom ||\n        draggableItemRect.right < dropAreaRect.left ||\n        draggableItemRect.bottom < dropAreaRect.top ||\n        draggableItemRect.left > dropAreaRect.right\n    );\n}\n\nfunction setDropAreaHighlighted(dropAreaEl, highlighted) {\n    if (highlighted) {\n        dropAreaEl.classList.add('drop-area_highlighted');\n    } else {\n        dropAreaEl.classList.remove('drop-area_highlighted');\n    }\n}\n\nfunction getRandomColor() {\n    const color = ['#'];\n    for (let i = 0; i < 6; i++) {\n        color.push(Math.floor(Math.random() * 16).toString(16));\n    }\n    return color.join('');\n}\n\nfunction setDraggableItemVisible(visible) {\n    if (visible) {\n        draggableItemEl.classList.remove('draggable-item_hidden');\n    } else {\n        draggableItemEl.classList.add('draggable-item_hidden');\n    }\n}\n\nfunction setDraggableItemCoords(x, y) {\n    draggableItemEl.style.top = `${y - DRAGGABLE_ITEM_HALF_SIZE}px`;\n    draggableItemEl.style.left = `${x - DRAGGABLE_ITEM_HALF_SIZE}px`;\n}\n\nfunction onDocumentPointerCancel(event) {\n    if (event.pointerId !== pointerId) {\n        return;\n    }\n    event.preventDefault();\n}\n\nfunction onDocumentScroll(event) {\n    event.preventDefault();\n}\n\nfunction onDragAreaPointerDown(event) {\n    if (pointerId !== null) {\n        return;\n    }\n    // eslint-disable-next-line no-bitwise\n    if (event.pointerType === 'mouse' && !(event.buttons & MOUSE_PRIMARY_BUTTON)) {\n        return;\n    }\n\n    pointerId = event.pointerId;\n    document.addEventListener('pointerup', onDocumentPointerUp);\n    document.addEventListener('pointermove', onDocumentPointerMove);\n    document.addEventListener('pointercancel', onDocumentPointerCancel);\n    document.addEventListener('scroll', onDocumentScroll);\n\n    draggableItemEl.style.backgroundColor = getRandomColor();\n    setDraggableItemCoords(event.pageX, event.pageY);\n    setDraggableItemVisible(true);\n}\n\ndragAreaEl.addEventListener('pointerdown', onDragAreaPointerDown);\n"],"names":["MOUSE_PRIMARY_BUTTON","DRAGGABLE_ITEM_HALF_SIZE","DROP_AREA_BORDER_WIDTH","dragAreaEl","document","getElementById","dropAreaGridEl","dropAreaCanvasEl","draggableItemEl","pointerId","onDocumentPointerUp","event","removeEventListener","onDocumentPointerMove","onDocumentPointerCancel","onDocumentScroll","doesDraggableItemCollideWithDropArea","dropDraggableItem","setDraggableItemVisible","setDropAreaHighlighted","dropAreaEl","droppedItemEl","createElement","className","style","backgroundColor","classList","add","setDroppedItemCoordsMappedToDropAreaCanvas","appendChild","dropAreaRect","getBoundingClientRect","top","parseInt","scrollTop","window","pageYOffset","documentElement","left","scrollLeft","pageXOffset","setDraggableItemCoords","pageX","pageY","updateDropAreasHighlighting","fully","draggableItemRect","right","bottom","highlighted","remove","getRandomColor","color","i","push","Math","floor","random","toString","join","visible","x","y","preventDefault","onDragAreaPointerDown","pointerType","buttons","addEventListener"],"version":3,"file":"index.a9afb03c.js.map"}